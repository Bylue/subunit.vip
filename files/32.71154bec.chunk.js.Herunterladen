(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"2uLe":function(e,t,n){"use strict";var a=n("mj2O"),c=n.n(a),r=n("7SM1"),i=n("s8DI"),s=n("VkHq"),o=n("Hvhg"),u=n("ERkP"),l=n("uDfI"),f=n("vTYT"),b=n("7oto"),d=n("hEj5");t.a=function useSetPreviewHeight(){var e=Object(d.a)(),t=Object(i.a)(e,2),n=t[0],a=t[1],O=Object(l.c)(function(e){return!!e.conversations.activeConversation}),j=Object(l.c)(o.c).showBranding,h=void 0!==j&&j,v=Object(s.a)().noPolicy,m=Object(l.c)(function(e){return e.session.gdpr}),p=m.hasConsent,g=m.declinedConsent,w=m.needsConsent,E=Object(u.useCallback)(function(){var e=0,t=!h&&v;return g&&(e+=40),t&&(e+=18),p||(e+=t?14:7),e},[g,p,v,h]),_=Object(u.useCallback)(function(){return n?n.height:200},[n]);return{setChatHeight:Object(u.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var t,n,a,r,i,s=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=s.length>1&&void 0!==s[1]&&s[1],!O||!p){c.next=3;break}return c.abrupt("return");case 3:if(n=_(),a=E(),"205px"!==(r=e?"".concat(n+155-a,"px"):"0px")){c.next=8;break}return c.abrupt("return");case 8:i=!w,Object(b.a)({topic:"set-frame-height",message:{height:r,name:f.c.CHAT,transition:i,transitionHeight:t}});case 10:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[O,p,w,E,_]),setPreviewRef:a,setSliderHeight:Object(u.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=_(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+80,"px"),name:f.c.SLIDER,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee2)})),[_]),setEmailCaptureHeight:Object(u.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=_(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+35,"px"),name:f.c.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[_])}}},G5CQ:function(e,t,n){},Gxm1:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var a=n("QtlZ"),c=n("LVcX"),r=n("0lfv"),i=n("CYoe"),s=function markTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a.a.dispatch(Object(i.c)(e,t))},o=function measureTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=Object(c.a)(null,["metrics","timeByName",e],Object(a.b)());return n?(a.a.dispatch(Object(i.a)(e)),t-n):(Object(r.n)({type:"warn",data:['Tried to measure "'.concat(e,'" without mark')]}),null)}},SrLZ:function(e,t,n){"use strict";n.r(t);var a=n("jm9a"),c=n("mj2O"),r=n.n(c),i=n("7SM1"),s=n("s8DI"),o=n("OE2q"),u=n("O94r"),l=n.n(u),f=n("Rqwx"),b=n("fTFZ"),d=n("vkRn"),O=n("CwrG"),j=n("HXmn"),h=n("8eKL"),v=n("slYP"),m=n("BY8A"),p=n("+/Je"),g=n("Y0wo"),w=n("fw6E"),E=n("1b8i"),_=n("gRD2"),C=n("+qGC"),k=n("fpJs"),y=n("Sn8X"),S=n("fJrp"),T=n("ERkP"),A=n.n(T),L=n("7oto");var H=n("VkHq"),R=n("GM2V"),x=n("lE29"),N=n("swFs"),I=n("+Kbs"),B=n("nQD+"),V=n("sxX9"),D=n("2uLe"),P=n("g6eD"),G=n("2XY6"),M=n("uDfI"),F=(n("SwvN"),function HeaderLayout(e){var t=e.chatHidden,n=Object(M.b)(),a=Object(x.a)(),c=a.backgroundStyles,r=a.conversationHeaderTextStyles,i=Object(M.c)(function(e){return e.session.gdpr}).hasConsent,o=Object(D.a)(),u=o.setChatHeight,f=o.setPreviewRef,b=Object(M.c)(function(e){return e.view}).chatOpen,d=Object(T.useState)(Object(M.c)(G.a)),O=Object(s.a)(d,2),j=O[0],h=O[1],v=Object(S.a)(j),m=j!==v;Object(T.useLayoutEffect)(function(){b&&!t&&u(b,m)},[b,t,u,m]);var p=Object(M.c)(G.a);Object(T.useEffect)(function(){p!==j&&h(p)},[p,j]);var g=V.a[j],w=j!==V.b.CONVERSATION;return A.a.createElement("header",{className:l()("drift-widget-header",{"drift-widget-header--collapsed":w,"drift-widget-header--gdpr-consent":!i})},A.a.createElement(N.a,{style:c}),A.a.createElement("div",{className:"drift-widget-header--content content--".concat(j)},A.a.createElement(g,{previewRef:f,resetChatHeight:function resetChatHeight(){u(b,!0)}})),A.a.createElement(B.a,{onClick:function doToggleChat(){n(Object(P.e)({chatOpen:!1}))},className:"drift-widget-close","aria-label":"Close Drift Widget messenger",style:r},A.a.createElement(I.j,{width:16,height:16})))}),X=n("K7i0"),Y=n("bYXQ"),U=n("Hvhg"),J=n("pu/X"),Q=n("da4L"),$=n("Gxm1"),q=n("LVcX"),z=n("TbSn"),K=n("kNJ0"),Z=n("oPI6"),W=n("ADGC"),ee=n("0lfv"),te=n("VpmR"),ne=n("4c+F"),ae=n("HSQL"),ce=(n("sXTY"),Object(T.lazy)(function(){return n.e(44).then(n.bind(null,"f2yG"))})),re=null,ie=function ChatLayout(){var e=Object(M.b)(),t=Object(W.c)(),n=function useReflowFrameClassName(){var e=Object(T.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(T.useEffect)(function(){Object(L.c)({topic:"CONDUCTOR:reflowFrame",handler:function handler(e){var t=e.data;a(function(){return t.isXSScreenSize?"widget--xs":""})}})},[]),n}(),c=Object(T.useState)(!0),u=Object(s.a)(c,2),f=u[0],N=u[1];Object(y.a)();var I=Object(M.c)(function(e){return e.view}),B=I.chatOpen,V=I.isChatTakeover,D=Object(M.c)(U.c).showBranding,P=void 0!==D&&D,G=Object(H.a)().noPolicy,Z=!P&&G;Object(T.useLayoutEffect)(function(){V&&B&&Object(L.a)({topic:"set-frame-width-and-height",message:{className:g.a,height:"100%",max:!0,name:"chat",width:"100%"}})},[V,B]);var te=Object(M.c)(function(e){return e.conversations.activeConversation}),ie=Object(_.a)().fetchMessages,se=Object(S.a)(te),oe=Object(M.c)(function(e){return e.conversations.conversations}),ue=Object(M.c)(function(e){return e.conversations.messages}),le=Object(M.c)(function(e){return Object(q.a)({},["conversations","messages",e.conversations.activeConversation],e)}),fe=Object(M.c)(function(e){return Object(q.a)(!1,["conversations","conversationStatus",e.conversations.activeConversation,"permaclosed"],e)}),be=Object(T.useMemo)(function(){return Object(Q.r)(le)},[le]),de=Object(M.c)(function(e){return e.campaigns.activeCampaign}),Oe=Object(M.c)(function(e){return e.session.gdpr}).hasConsent,je=Object(M.c)(function(e){return Object(q.a)(!1,["conversations","conversationStatus",te,"endUserResponded"],e)}),he=Object(w.a)(),ve=he.conversationHistoryOpen,me=he.conversationHistoryEnabled,pe=Object(R.a)(),ge=pe.sendTranscriptOpen,we=pe.sendTranscriptEnabled,Ee=Object(x.a)().widgetBackgroundStyles;Object(T.useEffect)(function(){(function(){var t=Object(i.a)(r.a.mark(function _callee(){var t,n,a,c,i;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=!te||te===p.a,n=se===te,a=!!oe[te]&&!!ue[te],!(t||n||a||Object(Y.e)(te))){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,Object(o.h)(te);case 8:c=r.sent,i=c.data,e(Object(X.h)({conversation:i})),ie({}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(5),Object(ee.f)(J.a.MESSAGE.FETCH_MESSAGE_OR_ACTIVE_CONVO,r.t0,!0);case 17:case"end":return r.stop()}},_callee,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[te,e,ie,se,oe,ue]),Object(T.useEffect)(function(){B?(function(){var e=Object(i.a)(r.a.mark(function _callee2(){return r.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)({topic:"focus-frame",message:{name:"chat"}});case 2:case"end":return e.stop()}},_callee2)}));return function focus(){return e.apply(this,arguments)}}()(),re&&clearTimeout(re),N(!1)):re=setTimeout(function delaySetReflowHidden(){N(!0)},350)},[B]);var _e=Object(T.useMemo)(function(){if(!Oe||!B)return!1;if(de&&de.id&&!te){var e=!!Object(q.a)(null,["attributes","cta"],de),t="CHAT_RESPONSE"!==Object(q.a)(null,["attributes","cta","CtaType"],de);if(e&&t)return!1}var n=be.length>0&&be.length<=2&&!Object(Q.e)(be[0]);return!V||n||be.length>2},[de,te,Oe,V,be,B]);Object(T.useEffect)(function(){Object(ae.b)("WIDGET_CHAT_FRAME.start")},[]);var Ce=Object(T.useRef)(!1);Object(T.useEffect)(function(){if(!Ce.current&&V&&be.length>0){var e=Object($.b)("post_form_takeover_tti"),t=Object($.b)("post_form_takeover_show");e&&Object(ne.d)("Post Form Takeover TTI",e),t&&Object(ne.d)("Post Form Takeover Show",t),Ce.current=!0}},[V,be]);var ke=Object(T.useMemo)(function(){if(fe)return b.a.UNAVAILABLE;var e=Object(z.a)(be);if(!e)return b.a.AVAILABLE;var t=Object(K.a)(-2,be),n=Object(Q.e)(t)&&Object(Q.i)(e);return Object(Q.e)(e)||n||Object(Q.j)(e)?b.a.UNAVAILABLE_BUTTONS:Object(Q.o)(e)||Object(Q.o)(t)&&Object(Q.i)(e)?b.a.AVAILABLE_BUTTONS:b.a.AVAILABLE},[be,fe]),ye=ke===b.a.AVAILABLE||ke===b.a.AVAILABLE_BUTTONS,Se=Object(E.a)(be,te),Te=Object(T.useMemo)(function(){return Object(Q.c)(Se)},[Se]),Ae=Object(C.b)(Se),Le=Object(C.a)(Se),He=!Object(ee.m)(Ae)&&Object(ee.m)(Le),Re=Object(T.useMemo)(function(){return A.a.createElement(h.a,{messageGroups:Te,messages:Se,reflowHidden:f,disabled:ve})},[Te,Se,f,ve]),xe=Object(k.a)(),Ne=Oe&&(!!te||V),Ie=!_e||!ye;return A.a.createElement("main",{className:l()("drift-widget-chat-layout",Object(a.a)({"drift-widget-chat-layout__takeover":V&&!t,"drift-widget-chat-layout__takeover--noResponse":V&&!t&&!je},n,!!n)),"aria-live":"polite"},A.a.createElement(m.a,null),A.a.createElement("div",{className:l()("drift-widget-chat-wrapper",{"drift-widget-chat-wrapper__open":B,"drift-widget-chat-wrapper__closed":!B,"drift-widget-chat-wrapper__reflow-hidden":f,"drift-widget-chat-wrapper__active-conversation":Ne,"drift-widget-chat-wrapper__no-footer-content":Z&&Ie,"drift-widget-chat-wrapper__mobile":t,"drift-widget-chat-wrapper__conversation-history":ve}),tabIndex:0},A.a.createElement(F,{chatHidden:f}),!V&&me&&A.a.createElement(d.a,null),!V&&we&&A.a.createElement("div",{className:l()("drift-widget-send-transcript-container",{"drift-widget-send-transcript-container--open":ge}),"aria-hidden":!ge},ge&&A.a.createElement(ce,{key:ge.toString()})),Ne&&A.a.createElement("div",{className:l()("drift-widget-message-history",{"drift-widget-message-history--with-footer":xe,"drift-widget-message-history--no-composer":Ie}),style:Ee},Re,0===be.length&&A.a.createElement(j.a,{titleId:"ChatLayoutLoading"})),A.a.createElement("div",{className:"drift-widget-chat-bottom"},_e&&A.a.createElement(b.b,{chatHidden:f,disabled:ve||ge}),!(ve||we)&&A.a.createElement(O.a,null)),te&&He&&A.a.createElement(v.a,{message:Ae})))};t.default=function(e){var t=Object(T.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(M.c)(function(e){return e.view.initComplete}),u=Object(M.c)(function(e){return Object(q.a)("en",["embed","configuration","locale"],e)});return Object(T.useEffect)(function(){o&&!a&&function(){var e=Object(i.a)(r.a.mark(function _callee3(){return r.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(te.b)(u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(ee.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn",internal:!0});case 8:c(!0);case 9:case"end":return e.stop()}},_callee3,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[o,a,u]),A.a.createElement(Z.a,null,o&&a?A.a.createElement(ie,e):A.a.createElement(f.a,null))}},SwvN:function(e,t,n){},hEj5:function(e,t,n){"use strict";var a=n("s8DI"),c=n("ERkP"),r=n("LaGA");t.a=function useResizeObserver(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(null),o=Object(a.a)(s,2),u=o[0],l=o[1],f=Object(c.useRef)(null),b=Object(c.useCallback)(function(){return f.current&&f.current.disconnect()},[]),d=Object(c.useCallback)(function(){u&&(f.current=new r.a(function(){return i(function getRectForRef(e){return e&&e.getBoundingClientRect()}(u))}),f.current.observe(u))},[u]);return Object(c.useLayoutEffect)(function(){return d(),function(){return b()}},[b,d]),[n,l]}},sXTY:function(e,t,n){},swFs:function(e,t,n){"use strict";var a=n("ERkP"),c=n.n(a);n("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}}}]);